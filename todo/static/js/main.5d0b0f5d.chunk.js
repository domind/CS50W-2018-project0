(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{122:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(31),r=n.n(o),c=(n(70),n(64)),l=n(7),s=n(8),d=n(11),p=n(9),u=n(6),m=n(12),b=n(45),h=n(18),g=n(20),f=n(63),k=n(13),E=n(32),v=(n(71),n(23)),O=n(24);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var j=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({userSelect:"none",padding:16,margin:"0 0 ".concat(8,"px 0"),background:e?"rgba(238, 232, 170,0.7) ":"rgb(238, 232, 170, 0.95)",color:"blue",boxShadow:"10px 10px 5px MidnightBlue  ",borderRadius:5},t)},w=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).openEdit=n.openEdit.bind(Object(u.a)(n)),n.deleteTask=n.deleteTask.bind(Object(u.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"deleteTask",value:function(e){e.stopPropagation(),this.props.elementEdit(this.props.item.id,"TaskDelete",this.props.item.content)}},{key:"openEdit",value:function(e){e.stopPropagation(),this.props.elementEdit(this.props.item.id,"TaskEdit",this.props.item.content)}},{key:"render",value:function(){var e=this;return i.a.createElement(h.b,{key:this.props.item.id,draggableId:this.props.item.id,index:this.props.index},(function(t,n){return i.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:j(n.isDragging,t.draggableProps.style),onClick:function(){return e.props.elementEdit("",!1)}})," ","TaskEdit"===e.props.action.actionName&&e.props.action.actionItem===e.props.item.id?i.a.createElement("div",null,i.a.createElement("input",{defaultValue:e.props.item.content,onChange:function(t){return e.props.elementEdit(e.props.item.id,e.props.action.actionName,t.target.value)},onClick:function(e){e.stopPropagation()}})):i.a.createElement(g.a,null,i.a.createElement(k.a,{sm:2},i.a.createElement(v.a,{id:e.props.item.id,onClick:e.openEdit,icon:O.a})),i.a.createElement(k.a,{sm:8,style:{overflow:"hidden",width:100,whiteSpace:"nowrap",textOverflow:"ellipsis"}},e.props.item.content+" "),i.a.createElement(k.a,{sm:2},i.a.createElement(v.a,{id:e.props.item.id,onClick:e.deleteTask,icon:O.b}))))}))}}]),t}(i.a.Component),x=n(34),C={padding:16,margin:"0 0 ".concat(8,"px 0"),boxShadow:"10px 10px 5px MidnightBlue  ",backgroundColor:"rgb(238, 232, 170, 0.95)",color:"blue"},D=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).clickAdd=n.clickAdd.bind(Object(u.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"clickAdd",value:function(e){e.stopPropagation(),this.props.elementEdit("","TaskAdd")}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(x.a,{style:C,onClick:this.clickAdd},"+ Add task"))}}]),t}(i.a.Component);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var P={fontWeight:"bold",fontSize:"x-large",color:"white ",textAlign:"center"},S=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).elementEdit=function(e,t,a){n.props.elementEdit(e,t,a,n.props.column.id)},n.deleteCol=function(){n.props.elementEdit("","ColDelete","",n.props.column.id)},n.editCol=function(e){e.stopPropagation();var t=n.props.column.title;n.props.elementEdit("","ColEdit",t,n.props.column.id)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=function(t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({border:"solid DarkSlateBlue   ",userSelect:"none",padding:16,margin:10,boxShadow:"10px 10px 5px MidnightBlue  ",background:t?" rgba(100, 149, 237,0.5)":"  rgba(100, 149, 237,1)  ",borderRadius:5,height:65*(e.props.column.tasks.length+1)+80},n)},n={padding:8,width:300,minHeight:40};return i.a.createElement(h.b,{key:this.props.column.id,draggableId:this.props.column.id,index:this.props.index},(function(a,o){return i.a.createElement("div",Object.assign({onClick:function(){return e.props.elementEdit("",!1)},ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:t(o.isDragging,a.draggableProps.style)}),i.a.createElement(h.c,{droppableId:"droppable"+e.props.index},(function(t,a){return i.a.createElement("div",null,i.a.createElement("div",{style:P},i.a.createElement(g.a,null,"ColEdit"===e.props.action.actionName&&e.props.action.actionItem===e.props.column.id?i.a.createElement("input",{defaultValue:e.props.column.title,onChange:function(t){return e.props.elementEdit("","ColEdit",t.target.value,e.props.column.id)},onClick:function(e){e.stopPropagation()}}):i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{sm:2},i.a.createElement(v.a,{onClick:e.editCol,icon:O.a})),i.a.createElement(k.a,{sm:8},e.props.column.title?e.props.column.title:'""'),i.a.createElement(k.a,{sm:2},i.a.createElement(v.a,{onClick:e.deleteCol,icon:O.b}))))),i.a.createElement("div",{ref:t.innerRef,style:n},e.props.column.tasks.map((function(t,n){return i.a.createElement(w,{key:n,item:t,index:n,elementEdit:e.elementEdit,action:e.props.action})})),t.placeholder,i.a.createElement(D,{elementEdit:e.elementEdit})))})))}))}}]),t}(i.a.Component),A={padding:16,margin:10,boxShadow:"10px 10px 5px MidnightBlue  ",backgroundColor:"rgba(100, 149, 237,1)",color:"white",width:300,minHeight:40},M=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).clickAdd=n.clickAdd.bind(Object(u.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"clickAdd",value:function(e){e.stopPropagation(),this.props.elementEdit("","ColAdd")}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(x.a,{style:A,onClick:this.clickAdd},"+ Add column"))}}]),t}(i.a.Component),T=n(36),N=n.n(T),W=function(e,t,n){var a=Array.from(e),i=a.splice(t,1),o=Object(b.a)(i,1)[0];return a.splice(n,0,o),a},H=function(e,t){return e.map((function(e){return e.id})).indexOf(t)},R={display:"flex",padding:5,margin:20,color:"black"},B={apiKey:"AIzaSyCmrU0AuRpNGPRsD2-JjQ5os7gPjKGxHMo",authDomain:"tribal-drake-257712.firebaseapp.com",databaseURL:"https://tribal-drake-257712.firebaseio.com",projectId:"tribal-drake-257712",storageBucket:"tribal-drake-257712.appspot.com",messagingSenderId:"577742396333",appId:"1:577742396333:web:8a52c828c3edb5de21df24"},U=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).writeUserData=function(){N.a.database().ref("/columns").set(n.state.column),console.log("DATA SAVED")},n.getUserData=function(){N.a.database().ref("/columns").on("value",(function(e){var t=e.val();if(null===t)t=[];else for(var a=0;a<t.length;a++)void 0===t[a].tasks&&(t[a].tasks=[]);n.setState({column:t})})),console.log("DATA RETRIEVED")},n.onDragEnd=function(e){var t=e.source,a=e.destination;if(a)if("board"===t.droppableId){var i=n.state.column;i=W(n.state.column,e.source.index,e.destination.index),n.setState({column:i})}else if(t.droppableId===a.droppableId){var o=n.state.column,r=W(n.state.column[t.droppableId.slice(9)].tasks,e.source.index,e.destination.index);o[t.droppableId.slice(9)].tasks=r,n.setState({tasks:r})}else{var l=n.state.column,s=Array.from(l[t.droppableId.slice(9)].tasks),d=Array.from(l[a.droppableId.slice(9)].tasks),p=s.splice(t.index,1),u=Object(b.a)(p,1)[0];d.splice(a.index,0,u),l[t.droppableId.slice(9)].tasks=s,l[a.droppableId.slice(9)].tasks=d,n.setState({column:l}),n.setState({colMinHeight:Math.max.apply(Math,Object(c.a)(n.state.column.map((function(e){return e.tasks.length}))))})}},N.a.initializeApp(B),n.state={column:[],width:window.innerWidth,height:window.innerHeight,colMinHeight:6,colNumber:4,action:{actionName:"",actionItem:""}},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(u.a)(n)),n.elementEdit=n.elementEdit.bind(Object(u.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),this.getUserData()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"elementEdit",value:function(e,t,n,a){var i=this.state.column,o=H(i,a);switch(t){case"ColAdd":var r;r=0===i.length?0:Math.max.apply(null,i.map((function(e){return parseInt(e.id.slice(3))}))),i.push({id:"col"+(r+1),title:"",tasks:[]}),this.setState({action:{actionName:"ColEdit",actionItem:"col"+(r+1)}});break;case"ColEdit":i[o].title=n,this.setState({column:i,editingCol:!0,editingColId:a,action:{actionName:"ColEdit",actionItem:a}});break;case"ColDelete":i.splice(H(i,a),1);break;case"TaskDelete":var c=this.state.column,l=c[H(c,a)];l.tasks.splice(H(l.tasks,e),1);break;case"TaskEdit":var s=H(i[o].tasks,e);i[o].tasks[s].content=n,this.setState({column:i}),this.setState({action:{actionName:t,actionItem:e}});break;case"TaskAdd":var d=Math.max.apply(null,i.map((function(e){var t;return t=0===e.tasks.length?[0]:e.tasks.map((function(e){return parseInt(e.id.slice(4))})),Math.max.apply(null,t)})));i[o].tasks.push({id:"task"+(d+1),content:""}),this.setState({column:i,action:{actionName:"TaskEdit",actionItem:"task"+(d+1)}});break;default:this.setState({action:{actionName:"",actionItem:""}})}this.setState({column:i}),this.writeUserData()}},{key:"render",value:function(){var e=this,t={minHeight:this.state.height,minWidth:358*this.state.colNumber+300,background:"SteelBlue",color:"white"};return i.a.createElement("div",{style:t,onClick:function(){return e.setState({editCol:!1,editingColId:"",action:{actionName:"",actionItem:""}})}},i.a.createElement(f.a,{style:{margin:0}},i.a.createElement(g.a,null,i.a.createElement(k.a,{style:{textAlign:"center"}},i.a.createElement("h1",null,"Testing react-beautiful-dnd"))),i.a.createElement(g.a,null,i.a.createElement(h.a,{onDragEnd:this.onDragEnd},i.a.createElement(h.c,{direction:"horizontal",droppableId:"board",type:"COLUMN"},(function(t,n){return i.a.createElement("div",null,i.a.createElement("div",{ref:t.innerRef,style:R},e.state.column.map((function(t,n){return i.a.createElement(S,{key:n,column:t,index:n,colMinHeight:e.state.colMinHeight,elementEdit:e.elementEdit,action:e.state.action})})),t.placeholder,i.a.createElement(M,{elementEdit:e.elementEdit})))}))))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},65:function(e,t,n){e.exports=n(122)},70:function(e,t,n){},71:function(e,t,n){}},[[65,1,2]]]);
//# sourceMappingURL=main.5d0b0f5d.chunk.js.map